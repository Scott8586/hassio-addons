#!/usr/bin/node
// Send command to set the state of a circuit.
 
const ScreenLogic = require('./index');

var myArgs = process.argv.slice(2);
var screenLogic_ip = process.env.SCREENLOGICIP;

connect(new ScreenLogic.UnitConnection(80, screenLogic_ip), parseInt(myArgs[0]), parseInt(myArgs[1]));

function connect(client, poolOrSpa, level) {
  client.on('loggedIn', function() {
    if(poolOrSpa == 0)
      this.setSaltCellConfig(0, level, isNaN);
    else
      this.setSaltCellConfig(0, isNaN, level);
    client.close();
  });

  client.connect();
}

